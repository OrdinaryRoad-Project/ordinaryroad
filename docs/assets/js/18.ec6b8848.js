/*
 * MIT License
 *
 * Copyright (c) 2021 苗锦洲
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{313:function(a,t,s){"use strict";s.r(t);var r=s(13),e=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"开发环境部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发环境部署"}},[a._v("#")]),a._v(" 开发环境部署")]),a._v(" "),t("h2",{attrs:{id:"开发环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发环境准备"}},[a._v("#")]),a._v(" 开发环境准备")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("工具")]),a._v(" "),t("th",[a._v("版本")]),a._v(" "),t("th",[a._v("说明")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("jdk")]),a._v(" "),t("td",[a._v("1.8/11")]),a._v(" "),t("td",[a._v("使用 "),t("code",[a._v("commons-thingsboard")]),a._v(" 模块时需要11")])]),a._v(" "),t("tr",[t("td",[a._v("MySQL")]),a._v(" "),t("td",[a._v("8.0+")]),a._v(" "),t("td")]),a._v(" "),t("tr",[t("td",[a._v("Redis")]),a._v(" "),t("td"),a._v(" "),t("td")]),a._v(" "),t("tr",[t("td",[a._v("Nacos")]),a._v(" "),t("td"),a._v(" "),t("td")]),a._v(" "),t("tr",[t("td",[a._v("Node.js")]),a._v(" "),t("td"),a._v(" "),t("td")]),a._v(" "),t("tr",[t("td",[a._v("Maven")]),a._v(" "),t("td"),a._v(" "),t("td")]),a._v(" "),t("tr",[t("td",[a._v("IDEA")]),a._v(" "),t("td"),a._v(" "),t("td")])])]),a._v(" "),t("h2",{attrs:{id:"项目构建与部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目构建与部署"}},[a._v("#")]),a._v(" 项目构建与部署")]),a._v(" "),t("h3",{attrs:{id:"_1-代码下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码下载"}},[a._v("#")]),a._v(" 1. 代码下载")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/1962247851/ordinaryroad.git\n")])])]),t("h3",{attrs:{id:"_2-配置本地host"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置本地host"}},[a._v("#")]),a._v(" 2. 配置本地host")]),a._v(" "),t("p",[a._v("推荐使用"),t("a",{attrs:{href:"https://github.com/oldj/SwitchHosts",target:"_blank",rel:"noopener noreferrer"}},[a._v("SwitchHosts"),t("OutboundLink")],1)]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# ordinaryroad Start\n127.0.0.1   ordinaryroad-mysql\n127.0.0.1   ordinaryroad-redis\n127.0.0.1   ordinaryroad-nacos\n127.0.0.1   ordinaryroad-gateway\n127.0.0.1   ordinaryroad-auth-server\n127.0.0.1   ordinaryroad-upms\n127.0.0.1   ordinaryroad-push\n127.0.0.1   ordinaryroad-im\n# ordinaryroad End\n")])])]),t("h3",{attrs:{id:"_3-数据库初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-数据库初始化"}},[a._v("#")]),a._v(" 3. 数据库初始化")]),a._v(" "),t("ul",[t("li",[a._v("Nacos数据库")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker/ordinaryroad-mysql/sql/or_config_dev.sql\n")])])]),t("ul",[t("li",[a._v("OrdinaryRoad数据库")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker/ordinaryroad-mysql/sql/or_dev.sql\ndocker/ordinaryroad-mysql/sql/or_oauth2_dev.sql\ndocker/ordinaryroad-mysql/sql/or_commons_log_dev.sql\n")])])]),t("h3",{attrs:{id:"_4-启动nacos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动nacos"}},[a._v("#")]),a._v(" 4. 启动Nacos")]),a._v(" "),t("p",[a._v("需要提前设置好数据库等信息")]),a._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://nacos.io/zh-cn/docs/quick-start.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Nacos 快速开始"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("使用Docker启动")]),a._v(" "),t("blockquote",[t("p",[a._v("注意版本号"),t("code",[a._v("v2.1.2-slim")]),a._v("后缀"),t("code",[a._v("-slim")]),a._v("为arm架构处理器需要")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --name or-nacos-dev "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MODE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("standalone "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SPRING_DATASOURCE_PLATFORM")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("xxxxxx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_DB_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("or_config_dev "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Root123. "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_DB_PARAM")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8848")]),a._v(":8848 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9848")]),a._v(":9848 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9555")]),a._v(":9555 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-d nacos/nacos-server:v2.1.2-slim\n")])])]),t("h3",{attrs:{id:"_5-修改数据库连接相关信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改数据库连接相关信息"}},[a._v("#")]),a._v(" 5. 修改数据库连接相关信息")]),a._v(" "),t("ul",[t("li",[a._v("Redis")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ordinaryroad-dev.yaml\n")])])]),t("ul",[t("li",[a._v("MySQL")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ordinaryroad-dev.yaml\nordinaryroad-auth-server-dev.yaml\nordinaryroad-upms-dev.yaml\n")])])]),t("h3",{attrs:{id:"_6-启动后端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动后端"}},[a._v("#")]),a._v(" 6. 启动后端")]),a._v(" "),t("p",[a._v("直接运行下面几个类即可")]),a._v(" "),t("ul",[t("li",[a._v("OrdinaryRoadAuthServerApp.java")]),a._v(" "),t("li",[a._v("OrdinaryRoadUpmsApp.java")]),a._v(" "),t("li",[a._v("OrdinaryRoadPushApp.java")]),a._v(" "),t("li",[a._v("OrdinaryRoadGatewayApp.java")])]),a._v(" "),t("h3",{attrs:{id:"_7-启动前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-启动前端"}},[a._v("#")]),a._v(" 7. 启动前端")]),a._v(" "),t("p",[a._v("先在 "),t("code",[a._v("ordinaryroad-ui")]),a._v(" 目录下创建 "),t("code",[a._v(".env")]),a._v(" 文件，内容如下")]),a._v(" "),t("div",{staticClass:"language-dotenv extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# https://www.nuxtjs.cn/guide/runtime-config#env-support\nBASE_URL=http://ordinaryroad-gateway:9090\n")])])]),t("p",[a._v("安装依赖")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd ordinaryroad-ui")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),t("p",[a._v("然后启动")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd ordinaryroad-ui")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run dev\n")])])]),t("h2",{attrs:{id:"系统账号说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统账号说明"}},[a._v("#")]),a._v(" 系统账号说明")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("模块")]),a._v(" "),t("th",[a._v("地址")]),a._v(" "),t("th",[a._v("账号信息")]),a._v(" "),t("th",[a._v("说明")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("前端")]),a._v(" "),t("td",[a._v("http://localhost:3001")]),a._v(" "),t("td",[a._v("10001/Abc123")]),a._v(" "),t("td")]),a._v(" "),t("tr",[t("td",[a._v("Knife")]),a._v(" "),t("td",[a._v("http://ordinaryroad-gateway:9090/doc.html")]),a._v(" "),t("td",[a._v("ordinaryroad-knife/secret")]),a._v(" "),t("td",[a._v("OAuth2认证，参考Knife文档https://doc.xiaominfo.com/knife4j/documentation/oauth2.html")])]),a._v(" "),t("tr",[t("td",[a._v("Nacos")]),a._v(" "),t("td",[a._v("http://localhost:8848")]),a._v(" "),t("td",[a._v("nacos/nacos")]),a._v(" "),t("td")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);